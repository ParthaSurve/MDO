
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font than Computer Modern for most use cases
    \usepackage{palatino}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{MDO\_architectures}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \subsection{SELLAR'S PROBLEM}\label{sellars-problem}

This is a coupled disciplinary problem in OpenMDAO and has two
disciplines. The problem can be stated as follows:

minimize \(x_1^2 +z_2 + y_1 + e^{-y_2}\)

w.r.t : \(z_1 , z_2 , x_1\)

subject to : \$\frac{y_1}{3.16} - 1 \geq 0 \$

\$1-\frac{y_2}{24} \geq 0 \$

\$ -10 \leq z\_1 \leq 10 \$

\$ 0 \leq z\_2 \leq 10 \$

\$ 0 \leq x\_1 \leq 10 \$

Discipline 1 : \(y_1 (z_1,z_2,x_1,y_2) = z_1 ^2 + x_1 + z_2 - 0.2y_2\)

Discipline 2 : \$y\_2 (z\_1,z\_2,y\_1) = \sqrt{y_1} + z\_1 + z\_2 \$

\(z_1\) and \$ z\_2 \$ are the global design variables while \(x_1\) is
a local design variable. \(y_1\) and \(y_2\) are coupling variables
between then two disciplines.

This coupling creates a non-linear system of equations which must be
satisfied for valid solutions.

\subsection{TYPES OF MDO
ARCHITECTURES}\label{types-of-mdo-architectures}

\begin{itemize}
\tightlist
\item
  Multidisciplinary Design Feasible (MDF)
\end{itemize}

In this architecture the disciplines are directly coupled via some kind
of solver, and the design variables are optimized all at the top level. 

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{c+c1}{\PYZsh{} sellar problem using MDF architecture}
         \PY{c+c1}{\PYZsh{} For printing, use this import if you are running Python 2.x}
         \PY{k+kn}{from} \PY{n+nn}{\PYZus{}\PYZus{}future\PYZus{}\PYZus{}} \PY{k+kn}{import} \PY{n}{print\PYZus{}function}
         \PY{k+kn}{from} \PY{n+nn}{openmdao.api} \PY{k+kn}{import} \PY{n}{ExecComp}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{,} \PY{n}{Group}\PY{p}{,} \PY{n}{NLGaussSeidel}\PY{p}{,} \PYZbs{}
                                  \PY{n}{ScipyGMRES}
         \PY{k+kn}{from} \PY{n+nn}{openmdao.api} \PY{k+kn}{import} \PY{n}{Problem}\PY{p}{,} \PY{n}{ScipyOptimizer}
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k+kn}{as} \PY{n+nn}{np}
         
         \PY{k+kn}{from} \PY{n+nn}{openmdao.api} \PY{k+kn}{import} \PY{n}{Component}
         
         
         \PY{k}{class} \PY{n+nc}{SellarDis1}\PY{p}{(}\PY{n}{Component}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Component containing Discipline 1.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarDis1}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Global Design Variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Local Design Variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Coupling parameter}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Coupling output}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}output}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
             \PY{k}{def} \PY{n+nf}{solve\PYZus{}nonlinear}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{params}\PY{p}{,} \PY{n}{unknowns}\PY{p}{,} \PY{n}{resids}\PY{p}{)}\PY{p}{:}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Evaluates the equation}
         \PY{l+s+sd}{        y1 = z1**2 + z2 + x1 \PYZhy{} 0.2*y2\PYZdq{}\PYZdq{}\PYZdq{}}
         
                 \PY{n}{z1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{z2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{x1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{y2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         
                 \PY{n}{unknowns}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{z1}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{z2} \PY{o}{+} \PY{n}{x1} \PY{o}{\PYZhy{}} \PY{l+m+mf}{0.2}\PY{o}{*}\PY{n}{y2}
         
            \PY{c+c1}{\PYZsh{} def linearize(self, params, unknowns, resids):}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Jacobian for Sellar discipline 1.\PYZdq{}\PYZdq{}\PYZdq{}}
            \PY{c+c1}{\PYZsh{}     J = \PYZob{}\PYZcb{}}
         
            \PY{c+c1}{\PYZsh{}     J[\PYZsq{}y1\PYZsq{},\PYZsq{}y2\PYZsq{}] = \PYZhy{}0.2}
            \PY{c+c1}{\PYZsh{}     J[\PYZsq{}y1\PYZsq{},\PYZsq{}z\PYZsq{}] = np.array([[2*params[\PYZsq{}z\PYZsq{}][0], 1.0]])}
            \PY{c+c1}{\PYZsh{}     J[\PYZsq{}y1\PYZsq{},\PYZsq{}x\PYZsq{}] = 1.0}
         
            \PY{c+c1}{\PYZsh{}     return J}
         
         
         \PY{k}{class} \PY{n+nc}{SellarDis2}\PY{p}{(}\PY{n}{Component}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Component containing Discipline 2.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarDis2}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Global Design Variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Coupling parameter}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Coupling output}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}output}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
             \PY{k}{def} \PY{n+nf}{solve\PYZus{}nonlinear}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{params}\PY{p}{,} \PY{n}{unknowns}\PY{p}{,} \PY{n}{resids}\PY{p}{)}\PY{p}{:}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Evaluates the equation}
         \PY{l+s+sd}{        y2 = y1**(.5) + z1 + z2\PYZdq{}\PYZdq{}\PYZdq{}}
         
                 \PY{n}{z1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{z2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{y1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         
         \PY{c+c1}{\PYZsh{} Note: this may cause some issues. However, y1 is constrained to be}
         \PY{c+c1}{\PYZsh{} above 3.16, so lets just let it converge, and the optimizer will}
         \PY{c+c1}{\PYZsh{} throw it out}
                 \PY{n}{y1} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{y1}\PY{p}{)}
         
                 \PY{n}{unknowns}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{y1}\PY{o}{*}\PY{o}{*}\PY{o}{.}\PY{l+m+mi}{5} \PY{o}{+} \PY{n}{z1} \PY{o}{+} \PY{n}{z2}
         
            \PY{c+c1}{\PYZsh{}def linearize(self, params, unknowns, resids):}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Jacobian for Sellar discipline 2.\PYZdq{}\PYZdq{}\PYZdq{}}
         \PY{c+c1}{\PYZsh{}     J = \PYZob{}\PYZcb{}}
         \PY{c+c1}{\PYZsh{}     J[\PYZsq{}y2\PYZsq{}, \PYZsq{}y1\PYZsq{}] = .5*params[\PYZsq{}y1\PYZsq{}]**\PYZhy{}.5}
         \PY{c+c1}{\PYZsh{}    \PYZsh{}Extra set of brackets below ensure we have a 2D array instead of a 1D array}
         \PY{c+c1}{\PYZsh{} for the Jacobian;  Note that Jacobian is 2D (num outputs x num inputs).}
         \PY{c+c1}{\PYZsh{}   J[\PYZsq{}y2\PYZsq{}, \PYZsq{}z\PYZsq{}] = np.array([[1.0, 1.0]])}
         \PY{c+c1}{\PYZsh{} return J}
         
         
         
         
         \PY{k}{class} \PY{n+nc}{SellarDerivatives}\PY{p}{(}\PY{n}{Group}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Group containing the Sellar MDA. This version uses the disciplines}
         \PY{l+s+sd}{    with derivatives.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarDerivatives}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         	
         	
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{deriv\PYZus{}options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fd}\PY{l+s+s1}{\PYZsq{}}	
         	
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{px}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pz1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{5.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pz2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{2.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{SellarDis1}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{SellarDis2}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj\PYZus{}cmp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj = x**2 + z2 + y1 + exp(\PYZhy{}y2)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                             \PY{n}{z2}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{y1}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{y2}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}\PY{p}{,}
                          \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con\PYZus{}cmp1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1 = 3.16 \PYZhy{} y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,}
                          \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con\PYZus{}cmp2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2 = y2 \PYZhy{} 24.0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,} 
                          \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nl\PYZus{}solver} \PY{o}{=} \PY{n}{NLGaussSeidel}\PY{p}{(}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nl\PYZus{}solver}\PY{o}{.}\PY{n}{options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{atol}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{1.0e\PYZhy{}12}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{ln\PYZus{}solver} \PY{o}{=} \PY{n}{ScipyGMRES}\PY{p}{(}\PY{p}{)}
         
         
         
         \PY{n}{top} \PY{o}{=} \PY{n}{Problem}\PY{p}{(}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{root} \PY{o}{=} \PY{n}{SellarDerivatives}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver} \PY{o}{=} \PY{n}{ScipyOptimizer}\PY{p}{(}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{optimizer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SLSQP}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tol}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{1.0e\PYZhy{}8}
         
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}objective}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{setup}\PY{p}{(}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Setting initial values for design variables}
         \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{1.0}
         \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{5.0}
         \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{2.0}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{p}{)}
         
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{k}{print}\PY{p}{(} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Minimum found at (}\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{)}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PYZbs{}
                                                  \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PYZbs{}
                                                  \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Coupling vars: }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Minimum objective: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#
Setup: Checking root problem for potential issues{\ldots}

No recorders have been specified, so no data will be saved.
Group '' has the following cycles: [['d1', 'd2']]

The following params are connected to unknowns that are updated out of order, so their initial values may contain uninitialized unknown values: ['d1.y2']

Setup: Check of root problem complete.
\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#

Optimization terminated successfully.    (Exit mode 0)
            Current function value: [ 3.18339395]
            Iterations: 7
            Function evaluations: 8
            Gradient evaluations: 7
Optimization Complete
-----------------------------------


Minimum found at (1.977639, 0.000000, 0.000000)
Coupling vars: 3.160000, 3.755278
Minimum objective:  3.18339395313

    \end{Verbatim}

    \begin{itemize}
\tightlist
\item
  Individual Design Feasible (IDF)
\end{itemize}

In IDF, the direct coupling between the disciplines is removed, and the
input coupling variables are added to the optimizer's design variables.
The algorithm calls for two new equality constraints that enforce the
coupling between the disciplines.

\begin{itemize}
\tightlist
\item
  Collaborative Optimization (CO)
\end{itemize}

CO is a two-level architecture with three optimizer loops, one at each
discipline, and one acting globally. The global optimizer drives the
design and coupling variables towards an optimal solution that minimizes
the objective while constraining to zero the sum of the squares of the
residuals between the values commanded by the global optimizer and those
set by the local optimizers. Each local optimizer operates on its own
discipline, driving its design variables while minimizing the residual
between the actual value of the design variables and the values
commanded by the global optimizer.

    \begin{itemize}
\tightlist
\item
  Simultaneous ANalysis and Design (SAND)
\end{itemize}

In SAND, the optimizer minimizes the problem by varying the design
variables simultaneously with the coupling variables to achieve
feasibility and drive the residual constraint to zero. This means the
residual needs to be expressed explicitly so we don't need any implicit
components or a solver. The optimizer does it all.

Here is the python code for solving the Sellar problem using the SAND
architecture in openMDAO.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{k+kn}{from} \PY{n+nn}{\PYZus{}\PYZus{}future\PYZus{}\PYZus{}} \PY{k+kn}{import} \PY{n}{print\PYZus{}function}
         
         \PY{k+kn}{import} \PY{n+nn}{time}
         
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k+kn}{as} \PY{n+nn}{np}
         
         \PY{k+kn}{from} \PY{n+nn}{openmdao.api} \PY{k+kn}{import} \PY{n}{Component}\PY{p}{,} \PY{n}{Group}\PY{p}{,} \PY{n}{Problem}\PY{p}{,}\PYZbs{}
             \PY{n}{IndepVarComp}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{,} \PY{n}{NLGaussSeidel}\PY{p}{,} \PYZbs{}
             \PY{n}{ScipyGMRES}\PY{p}{,} \PY{n}{ScipyOptimizer}
         
         \PY{k}{class} \PY{n+nc}{SellarDis1}\PY{p}{(}\PY{n}{Component}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Component containing Discipline 1.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarDis1}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Design Variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}output}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
             \PY{k}{def} \PY{n+nf}{solve\PYZus{}nonlinear}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{params}\PY{p}{,} \PY{n}{unknowns}\PY{p}{,} \PY{n}{resids}\PY{p}{)}\PY{p}{:}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Evaluates the equation}
         \PY{l+s+sd}{        y1 = z1**2 + z2 + x1 \PYZhy{} 0.2*y2\PYZdq{}\PYZdq{}\PYZdq{}}
         
                 \PY{n}{z1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{z2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{x1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{y2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         	\PY{n}{y1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         
                 \PY{n}{unknowns}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{z1}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{z2} \PY{o}{+} \PY{n}{x1} \PY{o}{\PYZhy{}} \PY{l+m+mf}{0.2}\PY{o}{*}\PY{n}{y2} \PY{o}{\PYZhy{}} \PY{n}{y1}
         
            
         \PY{k}{class} \PY{n+nc}{SellarDis2}\PY{p}{(}\PY{n}{Component}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Component containing Discipline 2.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarDis2}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         
                 \PY{c+c1}{\PYZsh{} Global Design Variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}param}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add\PYZus{}output}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{val}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
         
             \PY{k}{def} \PY{n+nf}{solve\PYZus{}nonlinear}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{params}\PY{p}{,} \PY{n}{unknowns}\PY{p}{,} \PY{n}{resids}\PY{p}{)}\PY{p}{:}
                 \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Evaluates the equation}
         \PY{l+s+sd}{        y2 = y1**(.5) + z1 + z2\PYZdq{}\PYZdq{}\PYZdq{}}
         
                 \PY{n}{z1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{z2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{y1} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
                 \PY{n}{y1} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{y1}\PY{p}{)}
                 \PY{n}{y2} \PY{o}{=} \PY{n}{params}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
         
                 \PY{n}{unknowns}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{y1}\PY{o}{*}\PY{o}{*}\PY{o}{.}\PY{l+m+mi}{5} \PY{o}{+} \PY{n}{z1} \PY{o}{+} \PY{n}{z2} \PY{o}{\PYZhy{}} \PY{n}{y2}
         
           
         
         
         
         \PY{k}{class} \PY{n+nc}{SellarSAND}\PY{p}{(}\PY{n}{Group}\PY{p}{)}\PY{p}{:}
             \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{} Group containing the Sellar MDA. This version uses the disciplines}
         \PY{l+s+sd}{    with derivatives.\PYZdq{}\PYZdq{}\PYZdq{}}
         
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{super}\PY{p}{(}\PY{n}{SellarSAND}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{p}{)}
         	
         	
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{deriv\PYZus{}options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fd}\PY{l+s+s1}{\PYZsq{}}	
         	
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{px}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pz1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{5.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pz2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{2.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{py1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{py2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{IndepVarComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{)}\PY{p}{,} \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 
         	
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{SellarDis1}\PY{p}{(}\PY{p}{)}\PY{p}{,} 
                      \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{SellarDis2}\PY{p}{(}\PY{p}{)}\PY{p}{,} 
                      \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}} \PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
         
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj\PYZus{}cmp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj = x**2 + z2 + y1 + exp(\PYZhy{}y2)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                             \PY{n}{z2}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{x}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{y1}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{y2}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}\PY{p}{,}
                          \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
                 
         	\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con\PYZus{}cmp1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1 = 3.16 \PYZhy{} y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,}
                      \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{add}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con\PYZus{}cmp2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{ExecComp}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2 = y2 \PYZhy{} 24.0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,}
                      \PY{n}{promotes}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         
               
         \PY{n}{top} \PY{o}{=} \PY{n}{Problem}\PY{p}{(}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{root} \PY{o}{=} \PY{n}{SellarSAND}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver} \PY{o}{=} \PY{n}{ScipyOptimizer}\PY{p}{(}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{optimizer}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{SLSQP}\PY{l+s+s1}{\PYZsq{}}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{options}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tol}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{l+m+mf}{1.0e\PYZhy{}12}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}desvar}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lower}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{10.0}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}objective}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{con2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{upper}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{equals}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{driver}\PY{o}{.}\PY{n}{add\PYZus{}constraint}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{resid2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{equals}\PY{o}{=}\PY{l+m+mf}{0.0}\PY{p}{)}
         
         \PY{n}{top}\PY{o}{.}\PY{n}{setup}\PY{p}{(}\PY{p}{)}
         \PY{n}{tt} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
         \PY{n}{top}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{p}{)}
         
         
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{k}{print}\PY{p}{(} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Minimum found at (}\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{)}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PYZbs{}
                                                  \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{z2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PYZbs{}
                                                  \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Coupling vars: }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{, }\PY{l+s+si}{\PYZpc{}f}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d1.y1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{d1.y2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Minimum objective: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{top}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{obj}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#
Setup: Checking root problem for potential issues{\ldots}

No recorders have been specified, so no data will be saved.

Setup: Check of root problem complete.
\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#

Optimization terminated successfully.    (Exit mode 0)
            Current function value: [ 3.18339395]
            Iterations: 6
            Function evaluations: 7
            Gradient evaluations: 6
Optimization Complete
-----------------------------------


Minimum found at (1.977639, 0.000000, 0.000000)
Coupling vars: 3.160000, 3.755278
Minimum objective:  3.18339395164

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} 
\end{Verbatim}


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
